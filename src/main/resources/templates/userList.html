<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ユーザ一覧</title>
    <script>
        // ユーザ一覧を表示する関数
        async function fetchUsers() {
            try {
                const response = await fetch('/api/users/list'); // 修正したエンドポイント
                const users = await response.json();

                // ユーザがいない場合
                if (users.length === 0) {
                    document.getElementById('userList').innerHTML = 'ユーザがいません。';
                    return;
                }

                // ユーザ一覧のHTMLを作成（表形式）
                let userListHTML = `
                    <table border="1">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>メール</th>
                                <th>名前</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                users.forEach(user => {
                    userListHTML += `
                        <tr>
                            <td>${user.id}</td>
                            <td>${user.email}</td>
                            <td>${user.name}</td>
                        </tr>
                    `;
                });
                userListHTML += '</tbody></table>';

                // ユーザ一覧を表示
                document.getElementById('userList').innerHTML = userListHTML;
            } catch (error) {
                console.error('ユーザの取得に失敗しました', error);
                document.getElementById('userList').innerHTML = 'ユーザの取得に失敗しました。';
            }
        }

        // ページが読み込まれたらユーザ一覧を取得
        window.onload = fetchUsers;
    </script>
</head>
<body>
    <h1>ユーザ一覧</h1>
    <div id="userList">ユーザ一覧を読み込み中...</div>
</body>
</html>
